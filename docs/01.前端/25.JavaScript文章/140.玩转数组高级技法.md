---
title: 玩转数组高级技法
date: 2022-09-26 17:02:48
permalink: /pages/f6407f/
categories:
  - 前端
  - JavaScript文章
tags:
  - 
---
# 玩转数组高级技法，成为JS高手

## 1.批量制造数据

一、创建新数组使用 for 循环批量 push 数据

```
function createData() {
  const data = [];
  for (let i = 0; i < 1000; i++) {
    data.push({
      name: `name${i + 1}`,
    });
  }
  return data;
}

const data = createData();
console.log(data);

```

二、创建空数组，填充fill，然后map

```
function createData() {
  // 如果不 fill 循环默认会跳过空值
  return new Array(1000).fill(null).map((v, i) => ({ name: `name${i + 1}` }));
}

const data = createData();
console.log(data);

```

三、Array.from 第二个初始化函数返回数据

```
function createData() {
  return Array.from({ length: 1000 }, (v, i) => ({ name: `name${i + 1}` }));
}

const data = createData();
console.log(data);

```

## 2.数组合并去重

一、Set去重

```
const arr1 = [1, 2, 3];
const arr2 = [3, 4, 5];

console.log(new Set([...arr1, ...arr2]));
```

二、for循环，indexOf判断是否存在

```
const arr1 = [1, 2, 3];
const arr2 = [3, 4, 5];

function mergeArray(arr1, arr2) {
  // 克隆
  const cloneArr1 = arr1.slice(0);
  let v;
  for (let i = 0; i < arr2.length; i++) {
    v = arr2[i];
    // 按位非，反转操作数的位，表象是对后面数字取负减一
    // 当数组中不存在此项 indexOf 返回 -1 按位非得 0 不走 if 逻辑
    // 如果两个数组都包含NaN，想要去重可使用includes
    if (~cloneArr1.indexOf(v)) {
      continue;
    }
    cloneArr1.push(v);
  }
  return cloneArr1;
}

console.log(mergeArray(arr1, arr2));

```

去重对象？

```
const arr1 = [{ id: 1 }, { id: 2 }, { id: 3 }];
const arr2 = [{ id: 3 }, { id: 4 }, { id: 5 }];

console.log(Array.from(new Set([...arr1, ...arr2]))); 
// [ { id: 1 }, { id: 2 }, { id: 3 }, { id: 3 }, { id: 4 }, { id: 5 } ] 
// 这样对象都是独立的引用，肯定无法去除属性相同的数据啦
```

如果是相同引用呢？

```
const obj3 = { id: 3 };
const arr1 = [{ id: 1 }, { id: 2 }, obj3];
const arr2 = [obj3, { id: 4 }, { id: 5 }];

console.log(Array.from(new Set([...arr1, ...arr2]))); // 确实可以，但是你开发这样做？

```